% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/updateFREM.R
\name{updateFREM}
\alias{updateFREM}
\title{updateFREM}
\usage{
updateFREM(strFREMModel, strFREMData = "", strFFEMData = "",
  cstrContCovsToAdd = NULL, cstrCatCovsToAdd = NULL,
  cstrCovsToAddOrder = NULL, strNewFREMData = NULL,
  strUpdateType = "OldInits", quiet = TRUE, strID = "ID",
  basenames = c("BASE", "PLMAX", "HLKON", "HLKOFF", "BASSL", "BP",
  "BASEWHZ", "PLMAXWHZ", "HLKONWHZ", "HLKOFFWHZ", "BASSLWHZ"),
  cstrKeepCols = c("ID", "SUBJID", "SITEID", "AGE", "AGEYI", "DV",
  "FREMTYPE"), bWriteData = TRUE, bWriteFIX = TRUE, cstrDV = "DV",
  cstrRemoveCov = NULL, covEpsNum = 2, overrideExistingCheck = FALSE,
  sortAGE = TRUE)
}
\arguments{
\item{strFREMModel}{File name of the FREM-model to append covariates to.}

\item{strFREMData}{Name of FREM-dataset to append covariates to (not used with strUpdateType "NoData").}

\item{strFFEMData}{Name of FFEM-dataset (normal dataset) that will be used to append the FREM-dataset, (not used with strUpdateType "NoData").}

\item{cstrContCovsToAdd}{A vector of continuous covariate names to add, default = NULL, (not used with strUpdateType "NoData").}

\item{cstrCatCovsToAdd}{A vector of categorical covariate names to add, default = NULL, (not used with strUpdateType "NoData").}

\item{cstrCovsToAddOrder}{A vector of the order of the covariate names to add, default = NULL (i.e. alphabetic order will be used), (not used with strUpdateType "NoData").
Note: if used, this should contain all covariates in cstrCatCovsToAdd as well as cstrContCovsToAdd.}

\item{strNewFREMData}{Name of the new dataset, default=paste0(strFREMData_without_extension,"new",".",extension), (not used with strUpdateType "NoData").}

\item{strUpdateType}{Update function to run: "OldInits" - Use the old values in the frem model (default), "NewInits" - Use new values from a ext file,
"NoData" - Do not create data or add variables to model, only a updated frem model in terms of new inits}

\item{quiet}{If set to FALSE, the function outputs verbose information on what it is doing.}

\item{strID}{A string with the ID identifier column in the FFEM dataset.}

\item{basenames}{A vector of strings with the names of the base variables (used for commenting), should be the same length as number of base thetas in the model, if NULL, BASE1,BASE2,etc are used as names.}

\item{cstrKeepCols}{A vector of columns to keep in the dataset (for the updated (small) dataset).}

\item{bWriteData}{If FALSE; add new variables to the model file but do not write new datasets, has no effect when "NoData" is used.}

\item{bWriteFIX}{If TRUE; FIX is written to the theta parameter estimates code for the covariates that were fixed in the model file, if FALSE; all theta parameters are assumed to be estimated.}

\item{cstrDV}{A vector of strings which are DV variables, important if new DVs (or new individuals) should be added, default="HAZ" (i.e. HAZ assumed fremtype=0), new DVs are added with fremtype 1,2,3...etc.}

\item{cstrRemoveCov}{A vector of strings for covariates that should be remove, note that FREMTYPEs for remaining covariates might/will change. The removal of covariates are done before any adding of data and/or new covariates.
Note that if this functionality is used to remove the last existing category of a categorical covariate, this should be done by removing the orginal name of the covariate and not the specific categorical covariate, i.e. "SITEID" instead of "SITEID_1" to ensure consistent renumbering of FREMTYPEs}

\item{covEpsNum}{The number of the epsilons parameter to be used for the covariates.}

\item{overrideExistingCheck}{If TRUE, the existing check will be overriden and covariates will be added even though they are present in $DATA of the modefile}
}
\value{
Will write a new fremdata set to disc. WIll also write a stub model file with the new covariates and initial estimates (the name will be runX_new.txt).
}
\description{
Appends or removes covariates in a FREM data set and FREM model.
}
\examples{
\dontrun{
## Adding CHLDADLT, FAGE, FHTCM, INCTOT, NROOMS, SMOKED
updateFREM(strFREMModel="run21.mod",
           strFREMData="fremData20.csv",strFFEMData="../../ProducedData/Dataset/smv1DatasetWHZ3.csv",cstrRemoveCov=NULL,cstrCatCovsToAdd=c("INCTOT", "SMOKED"),
           cstrContCovsToAdd=c("CHLDADLT", "FAGE", "FHTCM","NROOMS"),strID="ID",
           strNewFREMData="fremData21.csv",bWriteData = TRUE,quiet=F,bWriteFIX = TRUE,cstrKeepCols=c("ID","SUBJID","SITEID","AGE","AGEYI","DV","FREMTYPE","HO","TYPE"),
           covEpsNum=3)

# Removing MMARITN
updateFREM(strFREMModel="run48.mod",
           strFREMData="frem_dataset_run47small.csv",strFFEMData="../../ProducedData/Dataset/smv1Dataset16small.csv",cstrRemoveCov=c("MMARITN"),cstrCatCovsToAdd=NULL,cstrContCovsToAdd=NULL,strID="ID",
           strNewFREMData="frem_dataset_run48small.csv",bWriteData = TRUE,quiet=F,bWriteFIX = TRUE)
           
## Only updating the initial estimates
updateFREM(strFREMModel="run23.mod",cstrRemoveCov=NULL,strID="ID",bWriteData = FALSE,quiet=F,covEpsNum=3,strUpdateType="NoData")
           
}
}
